@inject IGetAllTagsUseCase _getAllTagsUseCase

@if (tags != null && tags.Count > 0)
{
    <table>
        <thead>
            <tr>
                <td></td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            @foreach (var tag in tags)
            {
                <tr>
                    <td @onclick="() => OnSelectedTag(tag)" style="cursor: pointer;">@tag.Name</td>
                    <td>
                        <button 
                            class="btn btn-danger"
                            @onclick="()=>RemoveTag(tag)">
                            X
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    [Parameter]
    public EventCallback<List<Tag>> OnSelectedTags { get; set; }

    public List<Tag> tags { get; set; }

    public List<Tag> selectedTags { get; set; }

    protected override async Task OnInitializedAsync()
    {
        tags = await _getAllTagsUseCase.ExecuteAsync();
    }

    private async Task OnSelectedTag(Tag tag)
    {
        selectedTags.Add(tag);
        await OnSelectedTags.InvokeAsync(this.selectedTags);
    }

    private void RemoveTag(Tag tag)
    {
        this.selectedTags.Remove(tag);
    }
}
